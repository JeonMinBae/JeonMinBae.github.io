{"componentChunkName":"component---src-templates-post-template-tsx","path":"/post/20220824/java8-interface/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<h1 id=\"entity에-디자인-패턴을-적용시키면-어떨까\" style=\"position:relative;\">Entity에 디자인 패턴을 적용시키면 어떨까<a href=\"#entity%EC%97%90-%EB%94%94%EC%9E%90%EC%9D%B8-%ED%8C%A8%ED%84%B4%EC%9D%84-%EC%A0%81%EC%9A%A9%EC%8B%9C%ED%82%A4%EB%A9%B4-%EC%96%B4%EB%96%A8%EA%B9%8C\" aria-label=\"entity에 디자인 패턴을 적용시키면 어떨까 permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h1>\n<p>프로젝트를 진행하는 도중 여러 도메인 메소드가 엔티티의 상태에 따라 다르게 동작하는 경우가 있었습니다.</p>\n<p>상태별 로직의 차이가 몇몇 변수값이 바뀌는 정도 혹은 로직 한 두줄이 추가되는 정도라면 각각의 함수마다 상태를 체크하는 분기를 넣어 로직을 분리를 할 수도 있겠지만</p>\n<p>상태에 따른 동작이 꽤나 상이하게 진행되는 로직으로 함수가 상태에 종류만큼 비대해지며 응집도도 떨어지는 상황이 될 것이 뻔해보였습니다.</p>\n<p>그렇기에 상태별로 함수가 다른 로직을 실행했으면 좋겠다고 생각하였고 거기에 맞아 떨어지는 디자인 패턴인</p>\n<p>상태패턴이 떠올랐습니다.</p>\n<p>그래서 상태패턴으로 상태별 로직을 분리하여 관리해보기로 했습니다.</p>\n<blockquote>\n<p>상태패턴에 대한 설명은 <a href=\"https://ko.wikipedia.org/wiki/%EC%83%81%ED%83%9C_%ED%8C%A8%ED%84%B4\" target=\"_blank\" rel=\"nofollow\">여기</a>를 참조</p>\n</blockquote>\n<br/>\n<h1 id=\"entity-내부의-인터페이스\" style=\"position:relative;\">Entity 내부의 인터페이스<a href=\"#entity-%EB%82%B4%EB%B6%80%EC%9D%98-%EC%9D%B8%ED%84%B0%ED%8E%98%EC%9D%B4%EC%8A%A4\" aria-label=\"entity 내부의 인터페이스 permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h1>\n<h2 id=\"entity의-속성은-인터페이스가-될-수-없다\" style=\"position:relative;\">Entity의 속성은 인터페이스가 될 수 없다.<a href=\"#entity%EC%9D%98-%EC%86%8D%EC%84%B1%EC%9D%80-%EC%9D%B8%ED%84%B0%ED%8E%98%EC%9D%B4%EC%8A%A4%EA%B0%80-%EB%90%A0-%EC%88%98-%EC%97%86%EB%8B%A4\" aria-label=\"entity의 속성은 인터페이스가 될 수 없다 permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>JPA는 인터페이스를 지원하지 않습니다.</p>\n<p>그렇기에 상태 패턴을 사용 시 각각의 상태구현체를 담아둘 인터페이스가 필요한데 <code class=\"language-text\">entity</code>에는 넣을 수가 없습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">TestState</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> str<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">changeState</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">TestStatus</span> status<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">changeName</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">T1State</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">TestState</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">TestEntity</span> test<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">T1State</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">TestEntity</span> test<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>test <span class=\"token operator\">=</span> test<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> str<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"T1 str = \"</span> <span class=\"token operator\">+</span> str<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">changeState</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">TestStatus</span> status<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">TestStatus</span><span class=\"token punctuation\">.</span><span class=\"token constant\">IN_PROGRESS</span><span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span>status<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n            test<span class=\"token punctuation\">.</span>status <span class=\"token operator\">=</span> status<span class=\"token punctuation\">;</span>\n            test<span class=\"token punctuation\">.</span>testState <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">T3State</span><span class=\"token punctuation\">(</span>test<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token keyword\">else</span><span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">IllegalArgumentException</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"PLANNED can change only to IN_PROGRESS\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">changeName</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        test<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"T1\"</span> <span class=\"token operator\">+</span> name<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">T2State</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">TestState</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">TestEntity</span> test<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">T2State</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">TestEntity</span> test<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>test <span class=\"token operator\">=</span> test<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> str<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"T2 str = \"</span> <span class=\"token operator\">+</span> str<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        test<span class=\"token punctuation\">.</span><span class=\"token function\">changeName</span><span class=\"token punctuation\">(</span>str<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">changeState</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">TestStatus</span> status<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">IllegalArgumentException</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"STOP can change status\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">changeName</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        test<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"T2\"</span> <span class=\"token operator\">+</span> name<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">T3State</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">TestState</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">TestEntity</span> test<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">T3State</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">TestEntity</span> test<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>test <span class=\"token operator\">=</span> test<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> str<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"T3 str = \"</span> <span class=\"token operator\">+</span> str<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        test<span class=\"token punctuation\">.</span><span class=\"token function\">changeName</span><span class=\"token punctuation\">(</span>str<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">changeState</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">TestStatus</span> status<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">TestStatus</span><span class=\"token punctuation\">.</span><span class=\"token constant\">STOP</span><span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span>status<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n            test<span class=\"token punctuation\">.</span>status <span class=\"token operator\">=</span> status<span class=\"token punctuation\">;</span>\n            test<span class=\"token punctuation\">.</span>testState <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">T2State</span><span class=\"token punctuation\">(</span>test<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token keyword\">else</span><span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">IllegalArgumentException</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"IN_PROGRESS can change only to STOP\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">changeName</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        test<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"T3\"</span> <span class=\"token operator\">+</span> name<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 513px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a412c817c1cd4f56b9d11601003118fd/7fe11/state_parttern_in_jpa1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 14.0625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAsUlEQVQI123IyW7CMABF0XwQBTs2VhNACXXw0EndRUApUhs7UcX/b2/VLLrq4ug+vaKtDXZraDcVvvE87R/ZVw2qaVCHDtVZtFkjhUBK+a+yLGdaa4qdkbT3kp1R+I3ltY2c33pC3xPOJ+LHhfjyjHMOHwLO+z8hxrkP1nJwHXqtKZZCsFwJVkKwuFsglOT69UlKiTQMjDkz5EyaJvI0kcZx9vt9327z7o8nLtd36rriBzWIbScI7MZAAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/a412c817c1cd4f56b9d11601003118fd/a59e9/state_parttern_in_jpa1.webp 192w,\n/static/a412c817c1cd4f56b9d11601003118fd/0ca9f/state_parttern_in_jpa1.webp 384w,\n/static/a412c817c1cd4f56b9d11601003118fd/144df/state_parttern_in_jpa1.webp 513w\"\n              sizes=\"(max-width: 513px) 100vw, 513px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/a412c817c1cd4f56b9d11601003118fd/3b721/state_parttern_in_jpa1.png 192w,\n/static/a412c817c1cd4f56b9d11601003118fd/66595/state_parttern_in_jpa1.png 384w,\n/static/a412c817c1cd4f56b9d11601003118fd/7fe11/state_parttern_in_jpa1.png 513w\"\n            sizes=\"(max-width: 513px) 100vw, 513px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/a412c817c1cd4f56b9d11601003118fd/7fe11/state_parttern_in_jpa1.png\"\n            alt=\"img1\"\n            title=\"img1\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h2 id=\"transient\" style=\"position:relative;\">@Transient<a href=\"#transient\" aria-label=\"transient permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>JPA는<code class=\"language-text\">@Transient</code> 라는 어노테이션을 지원합니다.</p>\n<p>이 기능을 이용하면 인터페이스가 영속화 대상에서 제외되며 <code class=\"language-text\">entity</code> 내부에서 인터페이스를 사용할 수  있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 302px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f1a43f6d6dee4d5dc253ee09886ca441/83034/state_parttern_in_jpa2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 21.354166666666668%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAw0lEQVQY04WP0UoDMRBF+0ObzSTTpE3SXaQFF4vRPqxisVVs8f//4MiyCAUffDgw92HOzF04J/SdkNZCSjM5C+oFawWRf7AWe5MXIQgvo2e4d9TqODx76qMjxpbGGEw7Y6fFpsG2LdaYmWn+lVo7C9UJT51nXzzjnfJQHPv+wNtw5FKvfNUrr7uRuN2h3xf084y+H9GPE3nYItOR2w+dCGkprFQowRFVCBrIMZNjYbPakELCqSJ9h6Q1kjNSChqXfyr/AAEqhK3YBGHoAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/f1a43f6d6dee4d5dc253ee09886ca441/a59e9/state_parttern_in_jpa2.webp 192w,\n/static/f1a43f6d6dee4d5dc253ee09886ca441/794ea/state_parttern_in_jpa2.webp 302w\"\n              sizes=\"(max-width: 302px) 100vw, 302px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/f1a43f6d6dee4d5dc253ee09886ca441/3b721/state_parttern_in_jpa2.png 192w,\n/static/f1a43f6d6dee4d5dc253ee09886ca441/83034/state_parttern_in_jpa2.png 302w\"\n            sizes=\"(max-width: 302px) 100vw, 302px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/f1a43f6d6dee4d5dc253ee09886ca441/83034/state_parttern_in_jpa2.png\"\n            alt=\"img2\"\n            title=\"img2\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Getter</span>\n<span class=\"token annotation punctuation\">@Entity</span>\n<span class=\"token annotation punctuation\">@NoArgsConstructor</span><span class=\"token punctuation\">(</span>access <span class=\"token operator\">=</span> <span class=\"token class-name\">AccessLevel</span><span class=\"token punctuation\">.</span><span class=\"token constant\">PROTECTED</span><span class=\"token punctuation\">)</span>\n<span class=\"token annotation punctuation\">@AllArgsConstructor</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">TestEntity</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token annotation punctuation\">@Id</span>\n    <span class=\"token annotation punctuation\">@GeneratedValue</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Long</span> index<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">TestStatus</span> status<span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@Transient</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">TestState</span> testState<span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@Builder</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">TestEntity</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Long</span> index<span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">,</span> <span class=\"token class-name\">TestStatus</span> status<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>index <span class=\"token operator\">=</span> index<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>status <span class=\"token operator\">=</span> status<span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>status<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">case</span> <span class=\"token constant\">PLANNED</span><span class=\"token operator\">:</span>\n                <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>testState <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">T1State</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">case</span> <span class=\"token constant\">STOP</span><span class=\"token operator\">:</span>\n                <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>testState <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">T2State</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">case</span> <span class=\"token constant\">IN_PROGRESS</span><span class=\"token operator\">:</span>\n                <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>testState <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">T3State</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> str<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        testState<span class=\"token punctuation\">.</span><span class=\"token function\">update</span><span class=\"token punctuation\">(</span>str<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">changeState</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">TestStatus</span> status<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        testState<span class=\"token punctuation\">.</span><span class=\"token function\">changeState</span><span class=\"token punctuation\">(</span>status<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">changeName</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        testState<span class=\"token punctuation\">.</span><span class=\"token function\">changeName</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n  \n<span class=\"token punctuation\">}</span></code></pre></div>\n<br/>\n<h1 id=\"불러온-엔티티의-transient-필드는-null\" style=\"position:relative;\">불러온 엔티티의 @Transient 필드는 NULL<a href=\"#%EB%B6%88%EB%9F%AC%EC%98%A8-%EC%97%94%ED%8B%B0%ED%8B%B0%EC%9D%98-transient-%ED%95%84%EB%93%9C%EB%8A%94-null\" aria-label=\"불러온 엔티티의 transient 필드는 null permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h1>\n<p>이제 상태패턴으로 구현이 되어 문제없이 사용할 수 있을 줄 알았습니다.</p>\n<p>테스트코드 작성 후 테스트를 해본 결과 NPE(NullPointerException)가 발생하는 것을 볼 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">\n<span class=\"token annotation punctuation\">@SpringBootTest</span>\n<span class=\"token annotation punctuation\">@Transactional</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">TestTest</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token annotation punctuation\">@Autowired</span>\n    <span class=\"token class-name\">TestRepo</span> testRepo<span class=\"token punctuation\">;</span>\n\n    \n    <span class=\"token annotation punctuation\">@Test</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">TestEntity</span> test <span class=\"token operator\">=</span> <span class=\"token class-name\">TestEntity</span><span class=\"token punctuation\">.</span><span class=\"token function\">builder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">index</span><span class=\"token punctuation\">(</span><span class=\"token number\">1L</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">name</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"QWE\"</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">status</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">TestStatus</span><span class=\"token punctuation\">.</span><span class=\"token constant\">PLANNED</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        testRepo<span class=\"token punctuation\">.</span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span>test<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token class-name\">TestEntity</span> found <span class=\"token operator\">=</span> testRepo<span class=\"token punctuation\">.</span><span class=\"token function\">findById</span><span class=\"token punctuation\">(</span><span class=\"token number\">1L</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        found<span class=\"token punctuation\">.</span><span class=\"token function\">changeName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"change\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//여기서 발생, TestEntity의 testState가 null </span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"1: found = \"</span> <span class=\"token operator\">+</span> found<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        found<span class=\"token punctuation\">.</span><span class=\"token function\">changeState</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">TestStatus</span><span class=\"token punctuation\">.</span><span class=\"token constant\">IN_PROGRESS</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        found<span class=\"token punctuation\">.</span><span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"change name\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"2: found = \"</span> <span class=\"token operator\">+</span> found<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token punctuation\">}</span>\n    \n    <span class=\"token annotation punctuation\">@Test</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">exceptionTest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n      <span class=\"token class-name\">TestEntity</span> test <span class=\"token operator\">=</span> <span class=\"token class-name\">TestEntity</span><span class=\"token punctuation\">.</span><span class=\"token function\">builder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">index</span><span class=\"token punctuation\">(</span><span class=\"token number\">2L</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">name</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"QWE\"</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">status</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">TestStatus</span><span class=\"token punctuation\">.</span><span class=\"token constant\">PLANNED</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      testRepo<span class=\"token punctuation\">.</span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span>test<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token class-name\">TestEntity</span> found <span class=\"token operator\">=</span> testRepo<span class=\"token punctuation\">.</span><span class=\"token function\">findById</span><span class=\"token punctuation\">(</span><span class=\"token number\">2L</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token function\">assertThrows</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">IllegalArgumentException</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span>found<span class=\"token punctuation\">.</span><span class=\"token function\">changeState</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">TestStatus</span><span class=\"token punctuation\">.</span><span class=\"token constant\">STOP</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c5be92a6b565adade481f7791f56d76e/42a19/state_parttern_in_jpa3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 13.541666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAvElEQVQI1y3DMW6DMBiAUS5ESmwI4BiwHX6bAImaIUPVLVPUpXeoOlTq1BN/VaM+6WXPb19c338wr5/ULx/42zdyvROjIDExzzMxRlJKxJTQZYntOqbjTAiB4D3eOZxzjCJkk3jOy4SM7jHGgOstQ7WjbxqMMY9t22L+76qKRm8plWJTKPJCsXkqyPOcLKSFv4dp5TAtjMcTtnd0WlNrjVKKrVI0Zcl5v+diLasxSCfUwwnlL/Sy4mXGDwO/i89qLJQHWwgAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/c5be92a6b565adade481f7791f56d76e/a59e9/state_parttern_in_jpa3.webp 192w,\n/static/c5be92a6b565adade481f7791f56d76e/0ca9f/state_parttern_in_jpa3.webp 384w,\n/static/c5be92a6b565adade481f7791f56d76e/dc9b9/state_parttern_in_jpa3.webp 768w,\n/static/c5be92a6b565adade481f7791f56d76e/d71bc/state_parttern_in_jpa3.webp 1024w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/c5be92a6b565adade481f7791f56d76e/3b721/state_parttern_in_jpa3.png 192w,\n/static/c5be92a6b565adade481f7791f56d76e/66595/state_parttern_in_jpa3.png 384w,\n/static/c5be92a6b565adade481f7791f56d76e/fe486/state_parttern_in_jpa3.png 768w,\n/static/c5be92a6b565adade481f7791f56d76e/42a19/state_parttern_in_jpa3.png 1024w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/c5be92a6b565adade481f7791f56d76e/fe486/state_parttern_in_jpa3.png\"\n            alt=\"img3\"\n            title=\"img3\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p><code class=\"language-text\">@Transient</code> 로 제외한 필드는 영속성 컨텍스트로 관리되지 않기에</p>\n<p>생성할 때는 생성자 함수에서 값을 설정하여 문제가 없지만</p>\n<p>find류 함수로 불러올 때는 값이 채워지지 않은 비어있는 상태로 반환되어 이러한 에러가 발생하는 것입니다.</p>\n<br/>\n<h1 id=\"해결\" style=\"position:relative;\">해결<a href=\"#%ED%95%B4%EA%B2%B0\" aria-label=\"해결 permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h1>\n<p>그렇다면 사용전에 세팅만 해준다면 문제가 없지 않을까</p>\n<p>각각의 <code class=\"language-text\">update()</code>, <code class=\"language-text\">changeState()</code>, <code class=\"language-text\">changeName()</code> 함수 호출 직후 <code class=\"language-text\">initState()</code> 를 바로 호출하여 <code class=\"language-text\">testState</code>를 초기화 해주면 에러가 발생하지 않습니다.</p>\n<p>이제 새로운 상태가 추가되었을 때는 상태에 맞는 처리를 하는 클래스를 작성 후 초기화 함수에 추가만 해주면 되게되었습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 295px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/adf51ed255d92604cba292433f7d06ae/60cc9/state_parttern_in_jpa4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 19.270833333333332%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAABBUlEQVQY003LT0vCcBzH8VFBx04dog4F3iow+ovl9tv8uTl1pLOkumUdgpwUQ+wSFZQQdOkaO4wFPYEeQWUwJOghvUOt8PDi8/4evoqslnCrLv7ZPtIusOzukso7OJU91KyNW65g2QUq5R1MO4/M2X297ilt11BlkfWii2Y7KJNeh4nWK4mrT9baX2y2Y9L3XVZuY+avY0bqb4w3PhjzBjtstP5O4rKDfOiSvPtm4eAGZfY4ZO7kkUXvCdGMUJsRshWRvXhm4zxkuhb0zRwF//13Tx0GJL0Q1Q9Z9V9YKp+imFJgZnSkIRC6iq6rCDFgGBqWFFhS+zXcGjkpyBha/6+36a0UP9uoo1pNRXfsAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/adf51ed255d92604cba292433f7d06ae/a59e9/state_parttern_in_jpa4.webp 192w,\n/static/adf51ed255d92604cba292433f7d06ae/66888/state_parttern_in_jpa4.webp 295w\"\n              sizes=\"(max-width: 295px) 100vw, 295px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/adf51ed255d92604cba292433f7d06ae/3b721/state_parttern_in_jpa4.png 192w,\n/static/adf51ed255d92604cba292433f7d06ae/60cc9/state_parttern_in_jpa4.png 295w\"\n            sizes=\"(max-width: 295px) 100vw, 295px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/adf51ed255d92604cba292433f7d06ae/60cc9/state_parttern_in_jpa4.png\"\n            alt=\"img4\"\n            title=\"img4\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 163px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/38d05a1090d1734a3535eed70b4906b5/5e043/state_parttern_in_jpa5.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 51.533742331288344%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB9klEQVQoz5WS207bQBRF8z1tKaICfL+MPY49Hsc2IQkkgYiHNIAobdqicmnUIKF+96piR4jXPqyHvc/oaPbM7shuhkwVstsSyS4iSrY6+y+SVNGJk5Q4VaiyhyoLskKT6q3uFS3lG171m3mvIOsVzZ5OECXofkEyCBGVS9CzCEuHoGcTlHbrlTbhK852bjUzUbuElUM6jFClphPFEt3XHKZ76NOU6eKEqPYoxhlqJPELi+6xINki+yHyKKA+L5qFm3Mb31L7qCqnE4oYVavGiGufP39XLB9u+fG05OfvJbPrKauXR1YvT42+W33nYf2L+/Ud5SRnujilmmrs/IC0p+j4Ydzc0CuNxvS0SbCJVNlNnLjvN4SV3UTbxG+eoLLxCqM54xYGXmm2C11fEMgQUfiEuYerD7HSfdzUwukaiMJD1hFxHSEqQXIUEVdhQ1S2yFqgBilBJOj4Iub9zi77xgFOYFGMcq6+XiKEbOqz83EPxxdUSvF5cISUKcOTCcOTMePJOYPRGF1UGKbL2exi88uSdx92kTpkeJFjWh7r52fuHx+ZLxbs7n3CjxNmxzXr+RlZljE+nzFfXHL7bcn88orReILp+lzd3LY9tF0f03Y5NGxM2+HAMFtt2nh+SJLlZEqT55quytsSZ+q1zKnShJHk+uYL/wDbbXXO9ErNngAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/38d05a1090d1734a3535eed70b4906b5/a81b5/state_parttern_in_jpa5.webp 163w\"\n              sizes=\"(max-width: 163px) 100vw, 163px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/38d05a1090d1734a3535eed70b4906b5/5e043/state_parttern_in_jpa5.png 163w\"\n            sizes=\"(max-width: 163px) 100vw, 163px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/38d05a1090d1734a3535eed70b4906b5/5e043/state_parttern_in_jpa5.png\"\n            alt=\"img5\"\n            title=\"img5\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<br/>\n<h1 id=\"고찰\" style=\"position:relative;\">고찰<a href=\"#%EA%B3%A0%EC%B0%B0\" aria-label=\"고찰 permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h1>\n<p>그래도 여전히 찝찝함은 남게되는데 인터페이스 함수를 쓰기 전에는 항상 인터페이스가 초기화 되었는지 직접 확인하는 코드를 작성해여된다는 점입니다.</p>\n<p>그래서 다른 더 좋은 방법이 없을까 하여 고민을 해보았는데 결론부터 말씀드리자면 <strong>실패</strong>입니다.</p>\n<h2 id=\"entitylistener\" style=\"position:relative;\">EntityListener<a href=\"#entitylistener\" aria-label=\"entitylistener permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>JPA에는 Entity에서 이벤트가 발생할 때마다 원하는 로직을 실행시킬 수 있게 도와주는 기능이 존재합니다.</p>\n<p><code class=\"language-text\">EntityListener</code> 라고 하며 종류와 이벤트 시점은 아래와 같습니다.</p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>이벤트 발생시점</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>@PrePersist</td>\n<td>insert method가 호출되기 전</td>\n</tr>\n<tr>\n<td>@PreUpdate</td>\n<td>merge method가 호출되기 전</td>\n</tr>\n<tr>\n<td>@PreRemove</td>\n<td>delete method가 호출되기 전</td>\n</tr>\n<tr>\n<td>@PostPersist</td>\n<td>insert method가 호출된 이후</td>\n</tr>\n<tr>\n<td>@PostUpdate</td>\n<td>merge method가 호출된 이후</td>\n</tr>\n<tr>\n<td>@PostRemove</td>\n<td>delete method가 호출된 이후</td>\n</tr>\n<tr>\n<td>@PostLoad</td>\n<td>select 조회가 된 직후</td>\n</tr>\n</tbody>\n</table>\n<p>이 중에서 <code class=\"language-text\">@PostLoad</code>를 이용해서 초기화 작업을 처리해보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@PostLoad</span>\n<span class=\"token keyword\">private</span> <span class=\"token keyword\">void</span> <span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">initState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">private</span> <span class=\"token keyword\">void</span> <span class=\"token function\">initState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>status<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">case</span> <span class=\"token constant\">PLANNED</span><span class=\"token operator\">:</span>\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>testState <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">T1State</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">case</span> <span class=\"token constant\">STOP</span><span class=\"token operator\">:</span>\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>testState <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">T2State</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">case</span> <span class=\"token constant\">IN_PROGRESS</span><span class=\"token operator\">:</span>\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>testState <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">T3State</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위 코드를 추가 함수마다 적어놓은 초기화 코드 제거 후 테스트를 돌려보면 <em>여전히 실패합니다.</em></p>\n<p>해당 어노테이션은  <code class=\"language-text\">find</code> 함수직후 불리는 것이 아니라 실제 SQL이 발생 하였을 때 발생하는 것이기 때문입니다.</p>\n<h2 id=\"aspect\" style=\"position:relative;\">Aspect<a href=\"#aspect\" aria-label=\"aspect permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p><code class=\"language-text\">@Aspect</code>는 AOP를 가능하게 하는 AspectJ 프로젝트에서 제공하는 어노테이션으로 AOP의 구현을 쉽게 해줍니다.</p>\n<p>하지만 이 역시 스프링의 <code class=\"language-text\">Bean</code>에 등록된 객체만 가능하기에 <code class=\"language-text\">entity</code>에는 적용할 수 없었습니다.</p>\n<br/>\n<h1 id=\"결론\" style=\"position:relative;\">결론<a href=\"#%EA%B2%B0%EB%A1%A0\" aria-label=\"결론 permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h1>\n<p>JPA 엔티티에 상태패턴을 적용하여 처리하기는 성공하였으나 그 방식에 깔끔하지 못해 개선이 필요해보인다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 470px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7644e3e1e7ba1337ca6f33e0aae4e05b/c52b7/state_parttern_in_jpa6.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.8125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAADVElEQVQozx3PeU+TBwDA4fejLNmyOXckW9RxDNMAImAFuQul9rAtRw96+EIHggVhIAUFC1lBBLEcFkIPujIQyAREETnDOOUKbsuWfYjfEv94PsAjbA0b2PEZ2Rk1sT1iZHesjIOAlaOAldPx2x99iJRzFqngw4SdvydF/pqw8d9MOf9MiZxF7JxGHByHyzkJVyBsDBrYGCxlc8jA1nMDa8NG9v1W3o9ZOAzaOB63cxyycxywsuK7zXKggXfhVtYi7ayMu1j1O9kLipxERI7GRYTNAQOvevT4W+SsekuY/kXN2qCBgzEbB34rh34bpyErCz0lrL6e4GBnie3NedbezrC0EGH5zQxvgq6Po6OQiLDcV8SK18BUh5Jgq5wXnWrWvUb2hi1sD5lZ7StlZ8iAr1nLH5sLLM6HmAj1Mzrkoa/bxe/TY2xOP2ZvxMxJWERYeqLjdbeWqUcqJt0qemsyGa7PxevMxVsrY+hnJU9rcnCWSNnfXeb44B0vZ/wszoVZX57m3z93eTnWxsYzPYcBO8Jsh4qptkK8zmxGG/PwOKSUyeJ4VCWn666cZ41apnrtNNnS8fW3cXa6xezkKG/nQsxNDhDxuVkcENkbMfHeb0MYbchhul3BfKeCBY8ShzIObfolxJsSciRfkXTxU6SxX6LLiMLdZKfSIkefFUW7I4unddm88Kg5/FXkMGRjfdiEMOsu4FWXgvmuW9QbM0mTfMd9awaaG7GkxnyBNO4bkmO+Jv77z+ht0mHOi6WjMp/9oMjZbyL74XIW+s30OJX8pM9H6Gmw0VlbiVZpJf5KIYk/nOdxjYw6wzVyky+iV+agzEvl8refMPKwGFNBEldT9FhLHXQ31/GwQkNB2lWyszPRahUIVRYFd+qDmMva0CmLuHLpHJ47Mp7U5qO5foGC9MvkSSWkxZ1nwKVDm5OMWFbNraIW1MXNFN9MJzUphmJZNC57EoJeKUVdUEqtKOK+Z6QwI4GMHz+n+64cX4uGovQLpMWew5QXhylfwv1qE/7+BxSrSklOTCEhIRqzKp7WFjn3GjUIKZJ4ypTZeJodPHBasGuSsBRlosqIxq6Ioa1egzo3EcX1KEzqG3hcVQQG3DRWl6OVpVBbEou+MJF8nZxrsiz+B9ClaIg6aBDzAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/7644e3e1e7ba1337ca6f33e0aae4e05b/a59e9/state_parttern_in_jpa6.webp 192w,\n/static/7644e3e1e7ba1337ca6f33e0aae4e05b/0ca9f/state_parttern_in_jpa6.webp 384w,\n/static/7644e3e1e7ba1337ca6f33e0aae4e05b/c63eb/state_parttern_in_jpa6.webp 470w\"\n              sizes=\"(max-width: 470px) 100vw, 470px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/7644e3e1e7ba1337ca6f33e0aae4e05b/3b721/state_parttern_in_jpa6.png 192w,\n/static/7644e3e1e7ba1337ca6f33e0aae4e05b/66595/state_parttern_in_jpa6.png 384w,\n/static/7644e3e1e7ba1337ca6f33e0aae4e05b/c52b7/state_parttern_in_jpa6.png 470w\"\n            sizes=\"(max-width: 470px) 100vw, 470px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/7644e3e1e7ba1337ca6f33e0aae4e05b/c52b7/state_parttern_in_jpa6.png\"\n            alt=\"img6\"\n            title=\"img6\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<br/>\n<h1 id=\"마무리\" style=\"position:relative;\">마무리<a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"마무리 permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h1>\n<p>이번 글의 내용 및 코드를 작성하면서 느낀 점은</p>\n<p>기존의 대부분의 spring, jpa 관련된 검색 내용들은 누가 이미 겪은 에러, 상황, 고민 들이었는데</p>\n<p>이번의 경우에는 생각보다 관련 내용이 적었습니다. <small>이유가 있던걸지도…</small></p>\n<p>본 글의 방법처럼 적용해 사용해도 문제가 없는 것인지 아니면 JPA와는 맞지 않는 방법인지는 솔직히 잘 모르겠습</p>\n<p>니다.</p>\n<p>분명 더 좋은 방법이 있을거 같은데 그 해답을 찾지 못하는 부족함을 반성하며 계속해서 개선해 나가야되겠습니다.</p>","tableOfContents":"<ul>\n<li>\n<p><a href=\"#entity%EC%97%90-%EB%94%94%EC%9E%90%EC%9D%B8-%ED%8C%A8%ED%84%B4%EC%9D%84-%EC%A0%81%EC%9A%A9%EC%8B%9C%ED%82%A4%EB%A9%B4-%EC%96%B4%EB%96%A8%EA%B9%8C\">Entity에 디자인 패턴을 적용시키면 어떨까</a></p>\n</li>\n<li>\n<p><a href=\"#entity-%EB%82%B4%EB%B6%80%EC%9D%98-%EC%9D%B8%ED%84%B0%ED%8E%98%EC%9D%B4%EC%8A%A4\">Entity 내부의 인터페이스</a></p>\n<ul>\n<li><a href=\"#entity%EC%9D%98-%EC%86%8D%EC%84%B1%EC%9D%80-%EC%9D%B8%ED%84%B0%ED%8E%98%EC%9D%B4%EC%8A%A4%EA%B0%80-%EB%90%A0-%EC%88%98-%EC%97%86%EB%8B%A4\">Entity의 속성은 인터페이스가 될 수 없다.</a></li>\n<li><a href=\"#transient\">@Transient</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%B6%88%EB%9F%AC%EC%98%A8-%EC%97%94%ED%8B%B0%ED%8B%B0%EC%9D%98-transient-%ED%95%84%EB%93%9C%EB%8A%94-null\">불러온 엔티티의 @Transient 필드는 NULL</a></p>\n</li>\n<li>\n<p><a href=\"#%ED%95%B4%EA%B2%B0\">해결</a></p>\n</li>\n<li>\n<p><a href=\"#%EA%B3%A0%EC%B0%B0\">고찰</a></p>\n<ul>\n<li><a href=\"#entitylistener\">EntityListener</a></li>\n<li><a href=\"#aspect\">Aspect</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EA%B2%B0%EB%A1%A0\">결론</a></p>\n</li>\n<li>\n<p><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\">마무리</a></p>\n</li>\n</ul>","fields":{"slug":"/post/20220826/state_parttern_in_jpa/"},"frontmatter":{"title":"Entity와 상태패턴","summary":"Entity에서 상태패턴 적용해보기","date":"2022.08.26.","categories":["Spring","Jpa"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAADTUlEQVQozx2P2zfbBwCAf3/LztnO6bq1Dz1ns0ndh9Rc65KFXCQipAhyQe4UmbmclCalhuVUFIsjJMFGtEYRK2XEZe16erY97L/4dtqH7+V7+c4nHM4ZePWziVcLZo6CJo4X2zhbsnC+ZOEqYv/Am1Unr1ddvFmz8fZXB2/XbPyz6eLd+ntv42rVxUXUyWXUiRB/aiT+1MDBrIGX80b254z8EbJwtthBYtnKRcTGRdj2IbA7b2U31M9eZJiDFS/7YQ/7i72cLNu5XHVwHrEjHMwYiU02MjtYzW6ghehoPfszBk4XLZyGOkiErFyFLcQmWni5u8bVeZzEyQ6H8Rh72yvE92JsL3lIvL8K2xG2/XpeBAyEvbXMD6mIPKojHjByPNfG0ayZXX8rR7MGAv06Tk92ePFbmOjSE+Znxph8PMDm+iKHG1McB81cRh0IW1ONPPvxHuGHWpa9WsacEvw9MiY6q5jokuN31zDulGLTFXF18Tt//XnIs40QO1tRjg5i/PfvJbGFEeLTTSSWbAgrPi3hB2omO6UE+uSMdJTQ8F0aQzYFXpeSie/riE61020oZdY/zN/vzthYC7K3Feb52gzheR/PA1ZOgibOQhaEgLuKyIiG9UcaNh5rMSozqC76ihZFFiXpN8j64mPEouuoSkQ86DPR3ixHXSpisEPC+H0p0bE6zqMOEmEr8TkTwopXRWxcw8a4DldjOd+m3aKntQxFcQq5ydcQp9wkO/kGqbc+YbyvHp0kFY9Vxumynde/ODiNONh8YmK0swazthJhtNfEcJcNtaKZzG+kZCR9hs8pw9FQyN3cJDSKcuQVeYhufkTA04iuUkyOuIZmXTujP3TT365BUpBLaWkxNWoZQkeLEnt3kCb9IDUKLZlffspDexVjXXLkBUlICtMoy08nL+VzfhrUoSq/g1FvR63tQ1XnplZRjDg7GY3kNm5jPoJGUYhSWo/TbMZzX4+0OIuC29fwuZRMD9ahLkoiT3SdekkaOmkmboeeoN9DrVJHTlYumZlf01Cdg2dARa9bi5CTnkGjshxfv4WBzlaa1Xdo0pYhKxGhl6cy1K1FUZFNZX4y91Ql+AbsLEx76bG3oZLkYa/PQFOVg0xTRUHFXf4HxKxqL6EXfrIAAAAASUVORK5CYII="},"images":{"fallback":{"src":"/static/5fb235b812b70bffacbd78de994d9585/1115f/state_parttern_in_jpa_thumbnail.png","srcSet":"/static/5fb235b812b70bffacbd78de994d9585/ac032/state_parttern_in_jpa_thumbnail.png 118w,\n/static/5fb235b812b70bffacbd78de994d9585/17927/state_parttern_in_jpa_thumbnail.png 235w,\n/static/5fb235b812b70bffacbd78de994d9585/1115f/state_parttern_in_jpa_thumbnail.png 470w","sizes":"(min-width: 470px) 470px, 100vw"},"sources":[{"srcSet":"/static/5fb235b812b70bffacbd78de994d9585/f421b/state_parttern_in_jpa_thumbnail.webp 118w,\n/static/5fb235b812b70bffacbd78de994d9585/42a7d/state_parttern_in_jpa_thumbnail.webp 235w,\n/static/5fb235b812b70bffacbd78de994d9585/758aa/state_parttern_in_jpa_thumbnail.webp 470w","type":"image/webp","sizes":"(min-width: 470px) 470px, 100vw"}]},"width":470,"height":272}},"publicURL":"/static/5fb235b812b70bffacbd78de994d9585/state_parttern_in_jpa_thumbnail.png"}}}},{"node":{"html":"<h1 id=\"interface-default\" style=\"position:relative;\">interface default<a href=\"#interface-default\" aria-label=\"interface default permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h1>\n<hr>\n<h2 id=\"java-8에서-interface\" style=\"position:relative;\">java 8에서 interface<a href=\"#java-8%EC%97%90%EC%84%9C-interface\" aria-label=\"java 8에서 interface permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>기존 자바의 인터페이스에서는 추상 메소드만을 멤버로 가질 수 있었습니다.\n하지만 java 8 이후로는 <code class=\"language-text\">default</code>, <code class=\"language-text\">static</code>를 사용할 수 있게 되었습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">ITest</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">printTest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">default</span> <span class=\"token keyword\">void</span> <span class=\"token function\">printDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"default\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Main</span><span class=\"token punctuation\">{</span>\n\n  <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">Test</span> test <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Test</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"============================================\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    test<span class=\"token punctuation\">.</span><span class=\"token function\">printTest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    test<span class=\"token punctuation\">.</span><span class=\"token function\">printDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\">ITest</span><span class=\"token punctuation\">.</span><span class=\"token function\">printStatic</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"============================================\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Test</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">ITest</span> <span class=\"token punctuation\">{</span>\n      \n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">printTest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"printTest\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n    \n<span class=\"token punctuation\">}</span>\n\n</code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 436px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8478bd9c0b7aca9c0a78593c13596bfd/94556/java8-interface1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 37.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAsUlEQVQoz6WR6QqDMBCE80Q58ARBYwQ1Corv/zBTZiGlASmV/hi+zcFsdqKapkHbtqiqSth1HcqyhDEG1tqMd+IZ5ZwTqhACYowYhgHbtuE4DnCvKAppQrHBHVOdzEg1zzOmacKyLGLa972Ipt77rxzHUerM8DxPrOuKfd+lm9ZaRvmFqc5Gvq5LDOu6lgspk6d6G6YX8kNoyk96QiobmRkwM+bBDLl+QiozTFn8o8+RX9+FBYXiUU0CAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/8478bd9c0b7aca9c0a78593c13596bfd/a59e9/java8-interface1.webp 192w,\n/static/8478bd9c0b7aca9c0a78593c13596bfd/0ca9f/java8-interface1.webp 384w,\n/static/8478bd9c0b7aca9c0a78593c13596bfd/d5689/java8-interface1.webp 436w\"\n              sizes=\"(max-width: 436px) 100vw, 436px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/8478bd9c0b7aca9c0a78593c13596bfd/3b721/java8-interface1.png 192w,\n/static/8478bd9c0b7aca9c0a78593c13596bfd/66595/java8-interface1.png 384w,\n/static/8478bd9c0b7aca9c0a78593c13596bfd/94556/java8-interface1.png 436w\"\n            sizes=\"(max-width: 436px) 100vw, 436px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/8478bd9c0b7aca9c0a78593c13596bfd/94556/java8-interface1.png\"\n            alt=\"img1\"\n            title=\"img1\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p><code class=\"language-text\">default</code> 키워드로 정의한 메서드는 오버라이드를 하지 않고 사용할 수 있으며 오류 또한 발생하지 않습니다.\n물론 아래와 같이 오버라이드하여 직접 세부내용을 구현이 가능합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"> <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Test</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">ITest</span> <span class=\"token punctuation\">{</span>\n    \n        <span class=\"token annotation punctuation\">@Override</span>\n        <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">printDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"override printDefault\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token annotation punctuation\">@Override</span>\n        <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">printTest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"printTest\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 375px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9358e7b661d0f17262ddbf8824903000/ae393/java8-interface2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 37.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAu0lEQVQoz6WRRw7DMAwE9SH33g1Xyf3/n9lgeQiQmwIfBisK1IpFDcOAdV2RZRm01jDGiPq+D8dx4LquFczlGzXPsxj0fY9t28SQyrhtW2u6rkMcx1DLsoCmrLJpGqk0z3OUZYmqqoS6rq2Ioghq33cxO88TRVEgDEP5KUkSSQiCwLptaZntskrqNE04jgP3feN5HlzXJXc0tUXxIefGwPO8nyEz/ofvUsZxBLf9BnpwTCpNUzlQ38L5fwBu3QsH2ydE4AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/9358e7b661d0f17262ddbf8824903000/a59e9/java8-interface2.webp 192w,\n/static/9358e7b661d0f17262ddbf8824903000/e922d/java8-interface2.webp 375w\"\n              sizes=\"(max-width: 375px) 100vw, 375px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/9358e7b661d0f17262ddbf8824903000/3b721/java8-interface2.png 192w,\n/static/9358e7b661d0f17262ddbf8824903000/ae393/java8-interface2.png 375w\"\n            sizes=\"(max-width: 375px) 100vw, 375px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/9358e7b661d0f17262ddbf8824903000/ae393/java8-interface2.png\"\n            alt=\"img2\"\n            title=\"img2\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p><code class=\"language-text\">static</code>의 경우 인터페이스를 상속받은 구현체가 아닌 인터페이스를 통해서 접근할 수 있습니다.</p>","tableOfContents":"<ul>\n<li>\n<p><a href=\"#interface-default\">interface default</a></p>\n<ul>\n<li><a href=\"#java-8%EC%97%90%EC%84%9C-interface\">java 8에서 interface</a></li>\n</ul>\n</li>\n</ul>","fields":{"slug":"/post/20220824/java8-interface/"},"frontmatter":{"title":"java 8 interface default","summary":"java 8에서 interface","date":"2022.08.24.","categories":["Java"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA6ElEQVQY001Q207CQBTcj1HpnktbCgW0xlIKBeLtCRM1+qIJ//8FY87uNvJwMmdmJ5Mz6zwRbIgIzBxm5HShG2bJO/LRf+lzpTIKZaj8B03zuCtHfeJj0KxgmP86iz7TDfO8gKrCew/3vhY8NYLPjeKlkWA6tYKPTvGzU3z3it9B8dZKwK+N4rxXnB4E50MOIo/tdo++H9C2Hdy6ZgxLweu9YLeMgcNK8Hgn6GoO2nMjaCrGomT0Cwnhx1vBcSUgYlTVDGU5xXxew1lA5inUsN0qGd4kPklvWapt/CqLWlWlr/I+XGqV/wA1J50jtiZQLAAAAABJRU5ErkJggg=="},"images":{"fallback":{"src":"/static/c23395deb8d9e8c0360efc9f7c388507/dee0a/java8-interface_thumbnail.png","srcSet":"/static/c23395deb8d9e8c0360efc9f7c388507/5d1b4/java8-interface_thumbnail.png 99w,\n/static/c23395deb8d9e8c0360efc9f7c388507/12984/java8-interface_thumbnail.png 198w,\n/static/c23395deb8d9e8c0360efc9f7c388507/dee0a/java8-interface_thumbnail.png 396w","sizes":"(min-width: 396px) 396px, 100vw"},"sources":[{"srcSet":"/static/c23395deb8d9e8c0360efc9f7c388507/ea3dc/java8-interface_thumbnail.webp 99w,\n/static/c23395deb8d9e8c0360efc9f7c388507/5cfb1/java8-interface_thumbnail.webp 198w,\n/static/c23395deb8d9e8c0360efc9f7c388507/77805/java8-interface_thumbnail.webp 396w","type":"image/webp","sizes":"(min-width: 396px) 396px, 100vw"}]},"width":396,"height":104}},"publicURL":"/static/c23395deb8d9e8c0360efc9f7c388507/java8-interface_thumbnail.png"}}}},{"node":{"html":"<h1 id=\"retrieve-vs-exchange\" style=\"position:relative;\">retrieve vs exchange<a href=\"#retrieve-vs-exchange\" aria-label=\"retrieve vs exchange permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h1>\n<hr>\n<h1 id=\"webclient에서-retrieve와-exchange는-어떻게-다를까\" style=\"position:relative;\">webclient에서 retrieve와 exchange는 어떻게 다를까<a href=\"#webclient%EC%97%90%EC%84%9C-retrieve%EC%99%80-exchange%EB%8A%94-%EC%96%B4%EB%96%BB%EA%B2%8C-%EB%8B%A4%EB%A5%BC%EA%B9%8C\" aria-label=\"webclient에서 retrieve와 exchange는 어떻게 다를까 permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h1>\n<blockquote>\n<p><code class=\"language-text\">exchange</code>는 현재 <em>deprecated</em> 되어 본문의 예제에서는 <code class=\"language-text\">exchangeToMono</code>를 사용합니다.</p>\n</blockquote>\n<p>공식문서에 따르면</p>\n<h2 id=\"retrieve\" style=\"position:relative;\">retrieve<a href=\"#retrieve\" aria-label=\"retrieve permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<blockquote>\n<p>Perform the HTTP request and retrieve the response body.</p>\n<p>…</p>\n<p>This method is a shortcut to using exchange() and decoding the response body through ClientResponse.</p>\n</blockquote>\n<h2 id=\"exchange\" style=\"position:relative;\">exchange<a href=\"#exchange\" aria-label=\"exchange permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<ul>\n<li><em>exchange는 현재 deprecated되었고 exchangeToMono와 exchangeToFlux 사용을 권장합니다.</em></li>\n</ul>\n<blockquote>\n<p>Perform the HTTP request and return a ClientResponse with the response status and headers. You can then use methods of the response to consume the body:</p>\n</blockquote>\n<p><code class=\"language-text\">retrieve</code>는 <code class=\"language-text\">ClientResponse</code>를 통해 응답 바디를 디코딩한 <code class=\"language-text\">exchange</code>의 숏컷이며,</p>\n<p><code class=\"language-text\">exchange</code>는 상태코드와 헤더와 함께 <code class=\"language-text\">ClientResponse</code>를 반환합니다.</p>\n<p>제가 이해한대로 풀어보자면 <code class=\"language-text\">retrieve</code>는 응답 바디를 바로 받아볼 수 있는 <code class=\"language-text\">exchange</code>의 편의 메소드이며 <code class=\"language-text\">exchange</code>는 응답 바디뿐만 아니라 헤더와 상태코드까지 받아볼 수 있는 메서드라는 것인데</p>\n<p>그렇다면 <code class=\"language-text\">retrieve</code> 에서는 헤더와 상태코드를 받아볼 수 없는 것일까요</p>\n<p>테스트를 위해 간단한 컨트롤러를 만들었습니다.</p>\n<h1 id=\"테스트\" style=\"position:relative;\">테스트<a href=\"#%ED%85%8C%EC%8A%A4%ED%8A%B8\" aria-label=\"테스트 permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h1>\n<p>아래는 version이라는 쿼리스트링을 받으며 이 값에 따라 상태코드와 응답바디를 다르게 리턴하는 엔드포인트입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">// 쿼리의 version값에 따라 다른 응답코드와 바디를 리턴하는 엔드포인트</span>\n<span class=\"token annotation punctuation\">@GetMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/return\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token class-name\">ResponseEntity</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token operator\">?</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">returnData</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@RequestParam</span><span class=\"token punctuation\">(</span>required <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">int</span> version<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token class-name\">Map</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span> <span class=\"token punctuation\">></span></span> queryString <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">HashMap</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    queryString<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"page\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"123\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    queryString<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"size\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"1231\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    queryString<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"size\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"1231\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token class-name\">Map</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span> <span class=\"token punctuation\">></span></span> credential <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">HashMap</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    credential<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"aaaa\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"aaaaa\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    credential<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"bbbb\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"bbbbb\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token class-name\">HttpHeaders</span> headers <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">HttpHeaders</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    headers<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"AAAAAAAA\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"fklsdnafg7i234gyuisv684\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    headers<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"BBBBBBBB\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"gv3jkigh98vwb0\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    headers<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"CCCCCCCC\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"0000000000090000000\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>version<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">case</span> <span class=\"token number\">2</span><span class=\"token operator\">:</span>\n            <span class=\"token keyword\">return</span> <span class=\"token class-name\">ResponseEntity</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">status</span><span class=\"token punctuation\">(</span><span class=\"token number\">200</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">headers</span><span class=\"token punctuation\">(</span>headers<span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">body</span><span class=\"token punctuation\">(</span>credential<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">case</span> <span class=\"token number\">3</span><span class=\"token operator\">:</span>\n            <span class=\"token keyword\">return</span> <span class=\"token class-name\">ResponseEntity</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">status</span><span class=\"token punctuation\">(</span><span class=\"token number\">300</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">headers</span><span class=\"token punctuation\">(</span>headers<span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">body</span><span class=\"token punctuation\">(</span>credential<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">case</span> <span class=\"token number\">4</span><span class=\"token operator\">:</span>\n            <span class=\"token keyword\">return</span> <span class=\"token class-name\">ResponseEntity</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">status</span><span class=\"token punctuation\">(</span><span class=\"token number\">400</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">headers</span><span class=\"token punctuation\">(</span>headers<span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">body</span><span class=\"token punctuation\">(</span>queryString<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">case</span> <span class=\"token number\">5</span><span class=\"token operator\">:</span>\n            <span class=\"token keyword\">return</span> <span class=\"token class-name\">ResponseEntity</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">status</span><span class=\"token punctuation\">(</span><span class=\"token number\">500</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">headers</span><span class=\"token punctuation\">(</span>headers<span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">body</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"gnio4hwg8902349030kzmamamavjih890w44gkuzd\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">default</span><span class=\"token operator\">:</span>\n            <span class=\"token keyword\">return</span> <span class=\"token class-name\">ResponseEntity</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">status</span><span class=\"token punctuation\">(</span><span class=\"token number\">200</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">headers</span><span class=\"token punctuation\">(</span>headers<span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">body</span><span class=\"token punctuation\">(</span>queryString<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<h2 id=\"retrieve-1\" style=\"position:relative;\">Retrieve<a href=\"#retrieve-1\" aria-label=\"retrieve 1 permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>같은 컨트롤러에 다른 엔드포인트를 하나 더 만들어 /return으로 요청하여 값을 검증해보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@GetMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/testRetrieve\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">testRetrieve</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@RequestParam</span><span class=\"token punctuation\">(</span>required <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">int</span> version<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token class-name\">Mono</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ResponseEntity</span><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Object</span><span class=\"token punctuation\">></span><span class=\"token punctuation\">></span></span> objectMono <span class=\"token operator\">=</span> <span class=\"token class-name\">WebClient</span><span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"http://localhost:8090\"</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">uri</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/return?version=\"</span> <span class=\"token operator\">+</span> version<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">retrieve</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">toEntity</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Object</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token class-name\">ResponseEntity</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Object</span><span class=\"token punctuation\">></span></span> response <span class=\"token operator\">=</span> objectMono<span class=\"token punctuation\">.</span><span class=\"token function\">block</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"version : \"</span> <span class=\"token operator\">+</span> version<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"response.getHeaders() = \"</span> <span class=\"token operator\">+</span> response<span class=\"token punctuation\">.</span><span class=\"token function\">getHeaders</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"response.getStatusCodeValue() = \"</span> <span class=\"token operator\">+</span> response<span class=\"token punctuation\">.</span><span class=\"token function\">getStatusCodeValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"response.hasBody() = \"</span> <span class=\"token operator\">+</span> response<span class=\"token punctuation\">.</span><span class=\"token function\">hasBody</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"response.getBody() = \"</span> <span class=\"token operator\">+</span> response<span class=\"token punctuation\">.</span><span class=\"token function\">getBody</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token string\">\"test Ok\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/fa45e88b941bf72c0eee1499925724ec/5e982/retrieve_vs_exchange1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 32.29166666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA7UlEQVQY012QbW6EMAxEOdBKZYF8QEiyQDbA9v7neZVTUqH+GM1Ycl5sN8dxkPdMiDMxRNa08fWKPFLiEQKz95znyb7vbNtGCIFxHFFKMQwDfd/TdV1xUZNzJqWE9740GmMYtEaJK4XWGmvtH6BCRLW+qwDf7zfLsjDPcwEYkTEFcgdKFkmudc1Vjaws6whQpqxNdy/AYUBLXR5e+fZBzU2MkZQ2lhCR7EPAOod2jl5OYC3OOaZpYpwDxgXM5FEX4L+a+Hrx/fmQ9501n8TtIKyZZV3LxMbYMqGcQI8OZR3KTDy7jrZtaZ/PX7/0AyqByC4Nytl4AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/fa45e88b941bf72c0eee1499925724ec/a59e9/retrieve_vs_exchange1.webp 192w,\n/static/fa45e88b941bf72c0eee1499925724ec/0ca9f/retrieve_vs_exchange1.webp 384w,\n/static/fa45e88b941bf72c0eee1499925724ec/dc9b9/retrieve_vs_exchange1.webp 768w,\n/static/fa45e88b941bf72c0eee1499925724ec/e2c2f/retrieve_vs_exchange1.webp 1152w,\n/static/fa45e88b941bf72c0eee1499925724ec/f3efb/retrieve_vs_exchange1.webp 1536w,\n/static/fa45e88b941bf72c0eee1499925724ec/36f90/retrieve_vs_exchange1.webp 1892w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/fa45e88b941bf72c0eee1499925724ec/3b721/retrieve_vs_exchange1.png 192w,\n/static/fa45e88b941bf72c0eee1499925724ec/66595/retrieve_vs_exchange1.png 384w,\n/static/fa45e88b941bf72c0eee1499925724ec/fe486/retrieve_vs_exchange1.png 768w,\n/static/fa45e88b941bf72c0eee1499925724ec/d2d74/retrieve_vs_exchange1.png 1152w,\n/static/fa45e88b941bf72c0eee1499925724ec/e8464/retrieve_vs_exchange1.png 1536w,\n/static/fa45e88b941bf72c0eee1499925724ec/5e982/retrieve_vs_exchange1.png 1892w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/fa45e88b941bf72c0eee1499925724ec/fe486/retrieve_vs_exchange1.png\"\n            alt=\"img1\"\n            title=\"img1\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>정상적으로 값을 받아오는걸 볼 수 있습니다.</p>\n<p>400과 500은 Bad Request와 Internal Server Error로 Webclient가 오류를 띄워주네요.</p>\n<p><code class=\"language-text\">retrieve</code> 에서도 정상적으로 상태코드와 헤더를 받아볼 수 있었습니다.</p>\n<p>그렇다면<code class=\"language-text\">retrieve</code> 에서도 상태코드, 헤더와 같은 정보를 받아올 수 있는데 <code class=\"language-text\">exchange</code> 와는 어떤 점이 다른걸까 더 불분명해진 상황이었습니다.</p>\n<p>자료를 더 찾아본 결과 <code class=\"language-text\">exchange</code>는 응답에 따른 유연한 상태처리가 가능하다는 것이었는데요</p>\n<p>하지만 응답에 따른 상태처리는 <code class=\"language-text\">retrieve</code> 도 <code class=\"language-text\">onStatus</code> 함수로 처리할 수 있습니다.</p>\n<p><code class=\"language-text\">onStatus</code>의 인터페이스를 확인해보면 매개변수로 Throwable을 상속받은 객체를 Mono로 감싸 넘겨줄 수 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 694px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0784aa69e9b0cb4a429a3761212ccae4/91652/retrieve_vs_exchange2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 6.770833333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAYAAADeko4lAAAACXBIWXMAAAsTAAALEwEAmpwYAAAATElEQVQI1y3DQQqAIBRAwc5UKRT1NVI0ydBq4f0v8to0MJ1WGpmEIIHqCk+MvCHTYqP6QlYnSSeSzBxWuOabutxYI2y7+3usWRmHng+i6yPiXFHR3wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/0784aa69e9b0cb4a429a3761212ccae4/a59e9/retrieve_vs_exchange2.webp 192w,\n/static/0784aa69e9b0cb4a429a3761212ccae4/0ca9f/retrieve_vs_exchange2.webp 384w,\n/static/0784aa69e9b0cb4a429a3761212ccae4/a23a1/retrieve_vs_exchange2.webp 694w\"\n              sizes=\"(max-width: 694px) 100vw, 694px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/0784aa69e9b0cb4a429a3761212ccae4/3b721/retrieve_vs_exchange2.png 192w,\n/static/0784aa69e9b0cb4a429a3761212ccae4/66595/retrieve_vs_exchange2.png 384w,\n/static/0784aa69e9b0cb4a429a3761212ccae4/91652/retrieve_vs_exchange2.png 694w\"\n            sizes=\"(max-width: 694px) 100vw, 694px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/0784aa69e9b0cb4a429a3761212ccae4/91652/retrieve_vs_exchange2.png\"\n            alt=\"img2\"\n            title=\"img2\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h2 id=\"exchange-1\" style=\"position:relative;\">Exchange<a href=\"#exchange-1\" aria-label=\"exchange 1 permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>그러면 <code class=\"language-text\">exchange</code> 는 어떤지 살펴보았습니다.</p>\n<p>똑같이 /return으로 요청을 보내고 처리만 <code class=\"language-text\">exchange</code>로 진행하였습니다.</p>\n<p>이번에는 <code class=\"language-text\">exchangeToMono</code>의 인터페이스 먼저 살펴본 후 넘어가겠습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 722px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/88672c90a2c2f3c70a5f121c17737447/ad973/retrieve_vs_exchange3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 5.208333333333334%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAYAAADeko4lAAAACXBIWXMAAAsTAAALEwEAmpwYAAAASElEQVQI1x3Fyw2AIBBAQWtCwx9xFzBA//08E+cyR/YeMZWSHKtFdk9MDbxlMEr7X3Uz70l0AU0GtYF83vjoeESR1hFRvL34AGXuIpJHD6tCAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/88672c90a2c2f3c70a5f121c17737447/a59e9/retrieve_vs_exchange3.webp 192w,\n/static/88672c90a2c2f3c70a5f121c17737447/0ca9f/retrieve_vs_exchange3.webp 384w,\n/static/88672c90a2c2f3c70a5f121c17737447/6aa51/retrieve_vs_exchange3.webp 722w\"\n              sizes=\"(max-width: 722px) 100vw, 722px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/88672c90a2c2f3c70a5f121c17737447/3b721/retrieve_vs_exchange3.png 192w,\n/static/88672c90a2c2f3c70a5f121c17737447/66595/retrieve_vs_exchange3.png 384w,\n/static/88672c90a2c2f3c70a5f121c17737447/ad973/retrieve_vs_exchange3.png 722w\"\n            sizes=\"(max-width: 722px) 100vw, 722px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/88672c90a2c2f3c70a5f121c17737447/ad973/retrieve_vs_exchange3.png\"\n            alt=\"img3\"\n            title=\"img3\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>Throwable을 상속받은 객체만 Mono형태로 리턴할 수 있는 <code class=\"language-text\">onStatus</code>와 달리 Mono를 상속받은 아무 객체나 리턴시킬 수 있습니다.</p>\n<p>이제 테스트를 진행해보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">// /return에 요청을 보내 상태코드에 따라 응답 값을 처리하는 엔드포인트</span>\n<span class=\"token annotation punctuation\">@GetMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/testExchange\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">testExchange</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@RequestParam</span><span class=\"token punctuation\">(</span>required <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">int</span> version<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token class-name\">Mono</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Object</span><span class=\"token punctuation\">></span></span> objectMono <span class=\"token operator\">=</span> <span class=\"token class-name\">WebClient</span><span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"http://localhost:8090\"</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">uri</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/return?version=\"</span> <span class=\"token operator\">+</span> version<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">exchangeToMono</span><span class=\"token punctuation\">(</span>res <span class=\"token operator\">-></span> <span class=\"token punctuation\">{</span>\n\t\t\t\t\t\t<span class=\"token comment\">// 헤더를 통한 컨트롤 또한 가능하다.</span>\n\t\t\t\t\t\t<span class=\"token comment\">// HttpHeaders httpHeaders = res.headers().asHttpHeaders();</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpStatus</span><span class=\"token punctuation\">.</span><span class=\"token constant\">OK</span><span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">.</span><span class=\"token function\">statusCode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">return</span> res<span class=\"token punctuation\">.</span><span class=\"token function\">bodyToMono</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Object</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpStatus</span><span class=\"token punctuation\">.</span><span class=\"token constant\">MULTIPLE_CHOICES</span><span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">.</span><span class=\"token function\">statusCode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">return</span> <span class=\"token class-name\">Mono</span><span class=\"token punctuation\">.</span><span class=\"token function\">empty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">return</span> res<span class=\"token punctuation\">.</span><span class=\"token function\">createException</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">flatMap</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Mono</span><span class=\"token operator\">::</span><span class=\"token function\">error</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"version : \"</span> <span class=\"token operator\">+</span> version<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>objectMono<span class=\"token punctuation\">.</span><span class=\"token function\">hasElement</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">block</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"objectMono NULL\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token keyword\">else</span><span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"objectMono.block().toString() = \"</span> <span class=\"token operator\">+</span> objectMono<span class=\"token punctuation\">.</span><span class=\"token function\">block</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token string\">\"test Ok\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8429e43e5ff83b3b59c2d288abf6596a/c8380/retrieve_vs_exchange4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.729166666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABgklEQVQoz2WSW7KbMBBEvZskP0hgBAb0ANkggx/7303f6rHlmOSja0pV0lFPzxyu1yvSkhCihbMO3jn0MeLXNOHPPON38Bicw23bsK6r6Hw+I8aItm1hjEFZltBaSz0sy4JxHDHYHnawcvE0DCiMgWpbqLqGqWucTieRMQ3KqoLWJZTWAvqWAIdhkJ+appFf67pGURRQSqFQSmqW1gplVqlRVdVOB+/9q4UQEHxACAHOe/TUOKILAdZa6cI5Bxsi7DSjDxd0dvwYyTp0XYfb7YZt23C/3/F4PKTyvEq+C1JKuFwumKYJzgd0vUXTdjBNK7m9nL9bJlAGk5KAn8+nQNdtw5KSZErN8wzGE+OEtmlQCkB9hpH1AVJ0lt3yTFeEsDIWZi2tvXP+Bu2AXAU6/AYS8u2MlVky+L8D0ruV+Q+YYdkhXVGEE5jeEfR9L9twPB53sE+GBBLA7Lb3AhOeW+UwWHmHbl9ZRmmf65UHsnOYgQRl5fzo7t88uV58m9clO/wBDvJ4JSKUOgcAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/8429e43e5ff83b3b59c2d288abf6596a/a59e9/retrieve_vs_exchange4.webp 192w,\n/static/8429e43e5ff83b3b59c2d288abf6596a/0ca9f/retrieve_vs_exchange4.webp 384w,\n/static/8429e43e5ff83b3b59c2d288abf6596a/dc9b9/retrieve_vs_exchange4.webp 768w,\n/static/8429e43e5ff83b3b59c2d288abf6596a/e2c2f/retrieve_vs_exchange4.webp 1152w,\n/static/8429e43e5ff83b3b59c2d288abf6596a/f3efb/retrieve_vs_exchange4.webp 1536w,\n/static/8429e43e5ff83b3b59c2d288abf6596a/f79a0/retrieve_vs_exchange4.webp 1698w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/8429e43e5ff83b3b59c2d288abf6596a/3b721/retrieve_vs_exchange4.png 192w,\n/static/8429e43e5ff83b3b59c2d288abf6596a/66595/retrieve_vs_exchange4.png 384w,\n/static/8429e43e5ff83b3b59c2d288abf6596a/fe486/retrieve_vs_exchange4.png 768w,\n/static/8429e43e5ff83b3b59c2d288abf6596a/d2d74/retrieve_vs_exchange4.png 1152w,\n/static/8429e43e5ff83b3b59c2d288abf6596a/e8464/retrieve_vs_exchange4.png 1536w,\n/static/8429e43e5ff83b3b59c2d288abf6596a/c8380/retrieve_vs_exchange4.png 1698w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/8429e43e5ff83b3b59c2d288abf6596a/fe486/retrieve_vs_exchange4.png\"\n            alt=\"img4\"\n            title=\"img4\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>오류의 형태로만 컨트롤할 수 있던 <code class=\"language-text\">retrieve</code> 와 달리 <code class=\"language-text\">exchange</code> 는 리턴 값의 형태를 바꾸거나 오류로 치환하는 등의 더 유연한 처리가 가능했습니다.</p>\n<h1 id=\"마무리\" style=\"position:relative;\">마무리<a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"마무리 permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h1>\n<ol>\n<li><code class=\"language-text\">retrieve</code>는 <code class=\"language-text\">exchange</code> 를 이용한 편의 메서드이다.</li>\n<li><code class=\"language-text\">retrieve</code> 에서도 충분히 상태코드와 헤더를 받아볼 수 있다.</li>\n<li><code class=\"language-text\">retrieve</code> 에서도 <code class=\"language-text\">onStatus</code>를 이용하여 상태코드에 따른 에러처리를 할 수  있으나 에러의 형태로만 처리가 가능하다.</li>\n<li><code class=\"language-text\">exchange</code>는 상태코드 뿐만 아니라 헤더를 통한 처리 등 <code class=\"language-text\">retrieve</code> 보다 훨씬 유연한 처리가 가능하다.</li>\n</ol>\n<p>결과적으로 간단한 처리만 하는 경우에는 <code class=\"language-text\">retrieve</code></p>\n<p>응답 상태 및 결과에 따른 에러발생, 데이터 변경 등 다양한 처리가 필요하다면 <code class=\"language-text\">exchange</code> 를 사용</p>\n<p>추가적으로 Mono나 Flux의 메소드 중 do…, on… 의 여러 메소드들이 존재하여 에러 발생 시 특정 값이 넘기거나 에러를 스킵하고 동작, 성공 시 처리, 종료 시 처리 등의 또 다른 처리들이 가능하지만 아직은 공부가 부족하여 좀 더 공부한 후에 다뤄보는것이 보고싶습니다.</p>\n<p>내용에 틀리거나 지적할 부분이 있을 시 알려주신다면 감사하겠습니다.</p>\n<blockquote>\n<p>참조: <a href=\"https://stackoverflow.com/questions/58410352/spring-boot-webclients-retrieve-vs-exchange\" target=\"_blank\" rel=\"nofollow\">https://stackoverflow.com/questions/58410352/spring-boot-webclients-retrieve-vs-exchange</a></p>\n</blockquote>","tableOfContents":"<ul>\n<li>\n<p><a href=\"#retrieve-vs-exchange\">retrieve vs exchange</a></p>\n</li>\n<li>\n<p><a href=\"#webclient%EC%97%90%EC%84%9C-retrieve%EC%99%80-exchange%EB%8A%94-%EC%96%B4%EB%96%BB%EA%B2%8C-%EB%8B%A4%EB%A5%BC%EA%B9%8C\">webclient에서 retrieve와 exchange는 어떻게 다를까</a></p>\n<ul>\n<li><a href=\"#retrieve\">retrieve</a></li>\n<li><a href=\"#exchange\">exchange</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%ED%85%8C%EC%8A%A4%ED%8A%B8\">테스트</a></p>\n<ul>\n<li><a href=\"#retrieve-1\">Retrieve</a></li>\n<li><a href=\"#exchange-1\">Exchange</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\">마무리</a></p>\n</li>\n</ul>","fields":{"slug":"/post/20220810/retrieve_vs_exchange/"},"frontmatter":{"title":"Webclient에서 retrieve와 exchange의 차이점","summary":"retrieve와 exchange의 차이점과 테스트","date":"2022.08.10.","categories":["Spring"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABO0lEQVQY032RTUsCURSG/Q/t3bXvT7QoqEVBq9q2lGgRbaqNbVtagRBkkNOX+EG2SHNGS2dMMpVIQg1x7r2N0294wokRadHi4XIO5zzc+96AlJLXnslV45hk64T3fhMlFUrKMVKIf/HnvpQiYH4U2MjNM5uYYiEVJFxa5+2zgRIS2x54C9+u6+EOhwwdh6Hze/q1sG2PkTQQsXZYzc4Qre2TbsXYNda4qB/iShcpBb1ul6JewDCK6LqOWS7zVDKwqlXMSgXLsjzRWHhQ3mTrYYmXTplap0QoN4dWj3hCIWwG/T6XmsbZaYx4/JxMOs1tJklc07hJXJPP57xXjIXF9h2h+zkWU0GWM9NsF1Zo9mooocZDjuN4+fiZ+X0/61EtfeEoJ6Od5ai6R/Q5TK3ziJhYnGTyI/72/Bv+ALYBmgKguqRpAAAAAElFTkSuQmCC"},"images":{"fallback":{"src":"/static/92ec87cfc5d7dff2e44688b35f703aca/cf374/retrieve_vs_exchange_thumbnail.png","srcSet":"/static/92ec87cfc5d7dff2e44688b35f703aca/0d27d/retrieve_vs_exchange_thumbnail.png 102w,\n/static/92ec87cfc5d7dff2e44688b35f703aca/2e823/retrieve_vs_exchange_thumbnail.png 205w,\n/static/92ec87cfc5d7dff2e44688b35f703aca/cf374/retrieve_vs_exchange_thumbnail.png 409w","sizes":"(min-width: 409px) 409px, 100vw"},"sources":[{"srcSet":"/static/92ec87cfc5d7dff2e44688b35f703aca/3d816/retrieve_vs_exchange_thumbnail.webp 102w,\n/static/92ec87cfc5d7dff2e44688b35f703aca/2b956/retrieve_vs_exchange_thumbnail.webp 205w,\n/static/92ec87cfc5d7dff2e44688b35f703aca/d7a2c/retrieve_vs_exchange_thumbnail.webp 409w","type":"image/webp","sizes":"(min-width: 409px) 409px, 100vw"}]},"width":409,"height":123}},"publicURL":"/static/92ec87cfc5d7dff2e44688b35f703aca/retrieve_vs_exchange_thumbnail.png"}}}}]}},"pageContext":{"slug":"/post/20220824/java8-interface/","ids":["1d875a13-14cd-5ba7-a29a-1ba00f02b98e","aeea483f-e223-566b-9ff4-f2b7fb7c5a45","5b4ec038-a49c-5d6b-a6ea-680cff54311d"]}},"staticQueryHashes":[]}