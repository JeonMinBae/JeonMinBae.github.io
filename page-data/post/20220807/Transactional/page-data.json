{"componentChunkName":"component---src-templates-post-template-tsx","path":"/post/20220807/Transactional/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<h1 id=\"transactional\" style=\"position:relative;\">Transactional<a href=\"#transactional\" aria-label=\"transactional permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h1>\n<ul>\n<li>class, method 위에 <code class=\"language-text\">@Transactional</code> 을 추가하면 트랜잭션 기능이 적용 된 프록시 객체가 생성</li>\n<li>프록시 객체는 <code class=\"language-text\">PlatformTransactionManager</code> 를 사용하여 정상적인 종료에는 <code class=\"language-text\">commit</code>  비정상적인 종료에는 <code class=\"language-text\">rollback</code> 을 실행</li>\n</ul>\n<h2 id=\"isolation---격리수준\" style=\"position:relative;\">isolation - 격리수준<a href=\"#isolation---%EA%B2%A9%EB%A6%AC%EC%88%98%EC%A4%80\" aria-label=\"isolation   격리수준 permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<table>\n<thead>\n<tr>\n<th>DEFAULT</th>\n<th></th>\n<th>- 기본 격리 수준(DB의 isolation level을 따름)</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>READ_UNCOMMITTED</td>\n<td>level 0</td>\n<td>- 커밋되지 않는(트랜잭션 처리중인) 데이터에 대한 읽기를 허용Dirty Read 발생 가능</td>\n</tr>\n<tr>\n<td>READ_COMMITTED</td>\n<td>level 1</td>\n<td>- 트랜잭션이 커밋 된 확정 데이터만 읽기 허용 <br/> - Dirty Read 발생 방지</td>\n</tr>\n<tr>\n<td>REPEATABLE_READ</td>\n<td>level 2</td>\n<td>- 트랜잭션이 완료될 때까지 SELECT 문장이 사용하는 모든 데이터에 shared lock이 걸리므로 다른 사용자는 그 영역에 해당되는 데이터에 대한 수정이 불가 <br/> - 선행 트랜잭션이 읽은 데이터는 트랜잭션이 종료될 때까지 후행 트랜잭션이 갱신하거나 삭제가 불가능 하기때문에 같은 데이터를 두 번 쿼리했을 때 일관성 있는 결과를 리턴 <br/> - Non-Repeatable Read 방지</td>\n</tr>\n<tr>\n<td>SERIALIZABLE</td>\n<td>level 3</td>\n<td>- 데이터의 일관성 및 동시성을 위해 MVCC(Multi Version Concurrency Control)을 사용하지 않음 <br/> - Phantom Read 방지</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"propagation---전파옵션\" style=\"position:relative;\">propagation - 전파옵션<a href=\"#propagation---%EC%A0%84%ED%8C%8C%EC%98%B5%EC%85%98\" aria-label=\"propagation   전파옵션 permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<table>\n<thead>\n<tr>\n<th>REQUIRED</th>\n<th>- 디폴트 속성 - 부모 트랜잭션 내에서 실행하며 부모 트랜잭션이 없을 경우 새로운 트랜잭션을 생성</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>SUPPORTS</td>\n<td>- 이미 시작된 트랜잭션이 있으면 참여, 그렇지 않으면 트랜잭션 없이 동작</td>\n</tr>\n<tr>\n<td>REQUIRES_NEW</td>\n<td>- 부모 트랜잭션을 무시, 무조건 새로운 트랜잭션을 생성</td>\n</tr>\n<tr>\n<td>MANDATORY</td>\n<td>- 이미 시작된 트랜잭션이 있으면 참여 <br/> - 이미 시작된 트랜잭션이 없음녀 예외를 발 <br/> - 독립적으로 트랜잭션을 진행하면 안 되는 경우 사용</td>\n</tr>\n<tr>\n<td>REQUIRES_NEW</td>\n<td>- 항상 새로운 트랜잭션을 생성 <br/> - 이미 시작된 트랜잭션이 있으면 잠시 보류</td>\n</tr>\n<tr>\n<td>NOT_SUPPORTED</td>\n<td>- 트랜잭션을 사용하지 않음 <br/> - 이미 시작된 트랜잭션이 있으면 보류</td>\n</tr>\n<tr>\n<td>NEVER</td>\n<td>- 트랜잭션을 사용하지 않도록 강제 <br/> - 이미 시작된 트랜잭션이 있으면 예외 발생</td>\n</tr>\n<tr>\n<td>NESTED</td>\n<td>- 이미 진행 중인 트랜잭션이 있으면 중첩 트랜잭션을 생성 <br/> - 중첩 트랜잭션이란 트랜잭션 안에 다시 트랜잭션을 만드는 것 <br/> - REQUIRES_NEW와는 차이가 있음</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"readonly---읽기-전용-속성\" style=\"position:relative;\">readOnly - 읽기 전용 속성<a href=\"#readonly---%EC%9D%BD%EA%B8%B0-%EC%A0%84%EC%9A%A9-%EC%86%8D%EC%84%B1\" aria-label=\"readonly   읽기 전용 속성 permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<ul>\n<li>트랜잭션을 읽기 전용으로 설정</li>\n<li>일부 트랜잭션 매니저의 경우 읽기전용 속성을 무시하고 쓰기 작업을 허용할 수도 있기 때문에 주의</li>\n</ul>\n<h2 id=\"트랜잭션-롤백-예외\" style=\"position:relative;\">트랜잭션 롤백 예외<a href=\"#%ED%8A%B8%EB%9E%9C%EC%9E%AD%EC%85%98-%EB%A1%A4%EB%B0%B1-%EC%98%88%EC%99%B8\" aria-label=\"트랜잭션 롤백 예외 permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>rollbackFor</td>\n<td>- 특정 예외가 발생 시 강제로 Rollback <br/> - ex) @Transactional(rollbackFor=Exception.class)</td>\n</tr>\n<tr>\n<td>noRollbackFor</td>\n<td>- 특정 예외의 발생 시 Rollback 처리되지 않음 <br/> - ex) @Transactional(noRollbackFor=Exception.class)</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"timeout\" style=\"position:relative;\">timeout<a href=\"#timeout\" aria-label=\"timeout permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<ul>\n<li>지정한 시간 내에 처리가 완료되지 않은 경우 rollback</li>\n<li>-1일 경우 no timeout</li>\n</ul>","tableOfContents":"<ul>\n<li>\n<p><a href=\"#transactional\">Transactional</a></p>\n<ul>\n<li><a href=\"#isolation---%EA%B2%A9%EB%A6%AC%EC%88%98%EC%A4%80\">isolation - 격리수준</a></li>\n<li><a href=\"#propagation---%EC%A0%84%ED%8C%8C%EC%98%B5%EC%85%98\">propagation - 전파옵션</a></li>\n<li><a href=\"#readonly---%EC%9D%BD%EA%B8%B0-%EC%A0%84%EC%9A%A9-%EC%86%8D%EC%84%B1\">readOnly - 읽기 전용 속성</a></li>\n<li><a href=\"#%ED%8A%B8%EB%9E%9C%EC%9E%AD%EC%85%98-%EB%A1%A4%EB%B0%B1-%EC%98%88%EC%99%B8\">트랜잭션 롤백 예외</a></li>\n<li><a href=\"#timeout\">timeout</a></li>\n</ul>\n</li>\n</ul>","frontmatter":{"title":"@Transactional 어노테이션 정리","summary":"@Transactional 어노테이션 정리","date":"2022.08.07.","categories":["Spring"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA5ElEQVQY03WNS0/CUBSE+2cs3Dn3YcWVEhYaBQrS8rABJDFuTfz/y89cCksWkzmTfDOnkAwzkd3JuOZb0g2m74viGrKHILwXg4FxVxrl4KKyz8Nh5uzM5Lu8MJk3L6pkebAHf77F369Yt6KeiX0ndhuxXYu2EZ9bsaxFtxPLhWg+ema1FKeDmM9Ft4gUUv4mvg6ORS2en8R4LE5Hx2zqaFfiuHfsO8f7m+P1RdRzsVk72sadx3N3MnE0U6NIKXGV94kYEzFEUnygun/AW0SWCFZRhREhJGJKRF8RNcIsYtb3RvGRfzxqoGlz9UadAAAAAElFTkSuQmCC"},"images":{"fallback":{"src":"/static/9016d1a7e621e7307a90b61625f7a730/27d29/Transactional.png","srcSet":"/static/9016d1a7e621e7307a90b61625f7a730/58ce5/Transactional.png 99w,\n/static/9016d1a7e621e7307a90b61625f7a730/7d6ab/Transactional.png 198w,\n/static/9016d1a7e621e7307a90b61625f7a730/27d29/Transactional.png 396w","sizes":"(min-width: 396px) 396px, 100vw"},"sources":[{"srcSet":"/static/9016d1a7e621e7307a90b61625f7a730/48d57/Transactional.webp 99w,\n/static/9016d1a7e621e7307a90b61625f7a730/24e2c/Transactional.webp 198w,\n/static/9016d1a7e621e7307a90b61625f7a730/ba748/Transactional.webp 396w","type":"image/webp","sizes":"(min-width: 396px) 396px, 100vw"}]},"width":396,"height":107}},"publicURL":"/static/9016d1a7e621e7307a90b61625f7a730/Transactional.png"}}}}]}},"pageContext":{"slug":"/post/20220807/Transactional/"}},"staticQueryHashes":[]}